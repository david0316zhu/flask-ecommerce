{% extends "admin_layout.html" %} {% block title %}Menu - Staff{% endblock %} {%
block heading %}Menu - Staff{% endblock %} {% block content%}
<main>
  <div class="container-fluid grey-container justify-content-between">
    <div>
      <div class="white-card filter-panel mb-5">
        <div class="mb-5">
          <h3>Filter</h3>
        </div>
        <form id="filter-form" method="POST" action="">
          <div class="mb-3">
            <div class="mb-2">
              <span><b>By Price</b></span>
            </div>
          </div>
          <div id="form-error" class="error mb-3"></div>
          {{ price_form.hidden_tag() }} {% if price_form.price.errors %} {{
          price_form.price(class="form-input is-invalid") }}
          <div class="invalid-feedback">
            {% for error in price_form.price.errors %}
            <span>{{ error }}</span>
            {% endfor %}
          </div>
          {% else %} {{ price_form.price(placeholder="Search by Price",
          class="form-input")}} {% endif %}
          <div id="form-error" class="error mb-3"></div>
          {{ price_form.submit(class="btn primary-btn")}}
        </form>
      </div>
      <div class="white-card need-help">
        <i class="material-icons">support</i>
        <h4>Need Help?</h4>
        <span>Call +65 1234 5678</span>
      </div>
    </div>
    <div class="row flex-column col-lg-8 main-panel">
      <form method="POST" action="">
        {{ form.hidden_tag() }}
        <div class="d-flex justify-content-end mb-5">
          <div class="search-input">
            {% if form.search.errors %} {{ form.search(class="form-input
            is-invalid") }}
            <div class="invalid-feedback">
              {% for error in form.search.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% else %} {{ form.search(placeholder="Search by title")}} {% endif
            %} {{ form.submit(class="material-icons") }}
          </div>
        </div>
      </form>
      <div class="list-header">
        <span class="list-lg">Item</span>
        <span class="list-sm">Price</span>
        <span class="list-sm">Action</span>
      </div>
      {% for entry in product_list %}
      <ul class="products-list">
        <li class="products-item">
          <div class="list-lg products-product">
            <div class="products-img">
              <img src="./static/assets/img/logo.png" alt="product" />
            </div>
            <div class="products-title">
              <h4>{{ entry.get_title() }}</h4>
              <span>{{ entry.get_info() }}</span>
            </div>
          </div>
          <div class="list-sm menu-products-price">
            <span>${{ entry.get_price() }}</span>
          </div>
          <div class="list-sm d-flex">
            <a class="list-btn mr-2" href='/updateProduct/{{entry.get_product_id()}}'>
              <i class="material-icons">create</i>
            </a>
            <form
              method="POST"
              action="{{ url_for('remove', id=entry.get_product_id()) }}"
            >
              <div class="list-btn">
                <i
                  class="material-icons"
                  data-toggle="modal"
                  data-target="#myModal_{{entry.get_product_id()}}"
                  >delete</i
                >
              </div>
              <div class="modal" id="myModal_{{ entry.get_product_id() }}">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <!-- Modal Header -->
                    <div class="modal-header">
                      <h4 class="modal-title">Delete Confirmation</h4>
                      <button type="button" class="close" data-dismiss="modal">
                        &times;
                      </button>
                    </div>

                    <!-- Modal body -->
                    <div class="modal-body">
                      Are you sure you want to delete?
                    </div>

                    <!-- Modal footer -->
                    <div class="modal-footer">
                      <input
                        type="submit"
                        value="Delete"
                        class="btn btn-danger"
                      />
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </li>
      </ul>
      {% endfor %}
    </div>
    <button class="btn primary-btn mt-3 floating-btn" id="new-product-btn">
      <i class="material-icons mr-2">add</i>
      <span>New Product</span>
    </button>
  </div>
</main>

<!-- Popup -->
<div class="position-relative" id="popup">
  <div class="popup-wrapper">
    <div class="overlay" id="popup-overlay">
      <div class="popup">
        <div class="mb-3">
          <span class="popup-title">Update Product</span>
        </div>
        <div class="close-btn" id="close-btn">
          <i class="material-icons">close</i>
        </div>
        <form
          class="form d-flex flex-column justify-content-center align-items-center"
          method="POST"
          action=""
        >
          {{ product_form.hidden_tag() }}
          <div class="w-100 mb-3">
            <label for="title">
              <span><b>Title</b></span>
            </label>
            {% if product_form.title.errors %} {{
            product_form.title(class="form-input is-invalid") }}
            <div class="invalid-feedback">
              {% for error in product_form.title.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% else %} {{ product_form.title(class="form-input",
            placeholder="Title")}} {% endif %}
          </div>
          <div class="w-100 mb-3">
            <label for="description">
              <span><b>Description</b></span>
            </label>
            {% if product_form.info.errors %} {{
            product_form.info(class="form-input is-invalid") }}
            <div class="invalid-feedback">
              {% for error in product_form.info.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% else %} {{ product_form.info(class="form-input",
            placeholder="Description of Product")}} {% endif %}
          </div>
          <div class="w-100 mb-3">
            <label for="price">
              <span><b>Price</b></span>
            </label>
            {% if product_form.price.errors %} {{
            product_form.price(class="form-input is-invalid") }}
            <div class="invalid-feedback">
              {% for error in product_form.price.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% else %} {{ product_form.price(class="form-input",
            placeholder="Price")}} {% endif %}
          </div>
          <div id="popup-error" class="error mb-3"></div>
          <div id="popup-success" class="success mb-3"></div>
          {{ product_form.submit(class="btn primary-btn")}}
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block scripts %} {{super()}}
<script>
  $(document).ready(function () {
    $("#popup").hide();

    // Hide popup on close button click
    $("#close-btn").click(function () {
      $("#popup").hide();
    });

    // Show popup on new product button click
    $("#new-product-btn").click(function () {
      $("#popup").show();
    });
  });
</script>
{% endblock %}
